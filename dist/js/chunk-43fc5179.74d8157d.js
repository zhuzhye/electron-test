(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43fc5179"],{"00f4":function(t,e,s){"use strict";s("6016")},6016:function(t,e,s){},"675d":function(t,e,s){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"gc-canvas",on:{click:t.reloadPic}},[e("canvas",{attrs:{id:"gc-canvas",width:t.contentWidth,height:t.contentHeight}})])},i=[],a={name:"VerifyCode",props:{length:{type:Number,default:4},fontSizeMin:{type:Number,default:20},fontSizeMax:{type:Number,default:45},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:128},contentHeight:{type:Number,default:48}},methods:{randomNum(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor(t,e){let s=this.randomNum(t,e),o=this.randomNum(t,e),i=this.randomNum(t,e);return"rgb("+s+","+o+","+i+")"},drawPic(){this.randomCode();let t=document.getElementById("gc-canvas"),e=t.getContext("2d");e.textBaseline="bottom",e.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),e.fillRect(0,0,this.contentWidth,this.contentHeight);for(let s=0;s<this.code.length;s++)this.drawText(e,this.code[s],s);this.$emit("success",this.code)},drawText(t,e,s){t.fillStyle=this.randomColor(this.colorMin,this.colorMax);let o=this.randomNum(this.fontSizeMin,this.fontSizeMax);t.font=o+"px SimHei";let i=10,a=(this.contentWidth-40)/(this.code.length-1),n=i;s>0&&(n=i+s*a);let r=this.randomNum(this.fontSizeMax,this.contentHeight-5);o>40&&(r=40);var c=this.randomNum(-10,10);t.translate(n,r),t.rotate(c*Math.PI/180),t.fillText(e,0,0),t.rotate(-c*Math.PI/180),t.translate(-n,-r)},drawLine(t){for(let e=0;e<1;e++)t.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),t.beginPath(),t.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.stroke()},drawDot(t){for(let e=0;e<100;e++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()},reloadPic(){this.drawPic()},randomCode(){let t="",e="1234567890";for(let s=0;s<this.length;s++){let s=Math.floor(10*Math.random());t+=e[s]}this.code=t}},mounted(){this.drawPic()},data(){return{code:""}}},n=a,r=s("2877"),c=Object(r["a"])(n,o,i,!1,null,"5335a306",null);e["a"]=c.exports},e7b7:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("div",{ref:"container",staticClass:"container"},[e("span",{staticClass:"switch-lang",on:{click:t.changeLang}},[t._v(" "+t._s("cn"===t.language?"EN":"中")+" ")]),e("div",{staticClass:"company"},[e("div",{staticClass:"name"},[t._v(t._s(t.$store.state.company))])]),e("div",{staticClass:"login-pancel"},[t.showSafety?e("div",{staticClass:"safety"},[e("a-button",{staticClass:"safetyBtn",on:{click:function(e){t.showSafety=!1}}},[t._v(t._s(t.$t("safety_back")))]),e("h3",[t._v(t._s(t.$t("security_verification")))]),e("p",[t._v(t._s(t.$t("security_tips")))]),e("a-form",{attrs:{form:t.phoneForm,layout:"horizontal"}},[e("p",{staticClass:"phone"},[t._v("138****8888")]),e("a-form-item",{staticClass:"verification-code"},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["msgCode",{rules:[t.formRules.verify]}],expression:"['msgCode', { rules: [formRules.verify] }]"}],attrs:{autocomplete:"off",placeholder:t.$t("enter_verify_code")},on:{change:t.inputCodeChange}}),e("a-button",{class:["send-verify",t.showCountDown?"count-down":""],attrs:{disabled:t.showCountDown},on:{click:t.getPhoneCode}},[t._v(" "+t._s(t.showCountDown?`${t.seconds}${t.$t("seconds_after_resend")}`:t.$t("get_verify_code"))+" ")])],1)],1),e("a-button",{staticClass:"login-btn enable-btn safety-login",attrs:{type:"primary",loading:t.loginLoad},on:{click:t.login}},[e("span",[t._v(t._s(t.$t("submit")))])])],1):e("div",[e("div",{staticClass:"qr-login"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.showQrCode,expression:"showQrCode"}],staticClass:"qr-tip",on:{click:t.scanQrcode}},[t._v(t._s(t.$t("account_to_login")))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.showQrCode,expression:"!showQrCode"}],staticClass:"qr-tip",on:{click:t.scanQrcode}},[t._v(t._s(t.$t("scan_to_login")))]),e("img",{staticClass:"qr-btn",attrs:{src:t.loginMode[t.showQrCode?"pc":"qr"].img,alt:""},on:{click:t.scanQrcode}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showQrCode,expression:"showQrCode"}],staticClass:"qr-code"},[t.QRshow?[e("img",{attrs:{src:"",alt:""}})]:[t.QRCodeImgShow?e("img",{staticStyle:{width:"240px",height:"240px"},attrs:{src:t.QRCodeImg,alt:"二维码获取失败!"}}):e("div",[e("a-result",{attrs:{status:"warning",title:"二维码获取失败或没有对应的公众号"}})],1)],e("div",{staticClass:"tip"},[t._v(t._s(t.$t("please_open_wechat_scan")))])],2),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showQrCode,expression:"!showQrCode"}],staticClass:"login-form"},[e("a-tabs",{on:{change:t.changeMode},model:{value:t.currentKey,callback:function(e){t.currentKey=e},expression:"currentKey"}},[e("a-tab-pane",{key:"1",attrs:{tab:t.$t("login_with_account")}},[e("a-form",{attrs:{form:t.accountForm,layout:"horizontal"}},[e("a-form-item",[e("i",{class:["icon",t.accountFoucs?"icon_account_check":"icon_account"]}),e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[t.formRules.account]}],expression:"['account', { rules: [formRules.account] }]"}],staticClass:"account",attrs:{placeholder:t.$t("user_id")},on:{focus:function(e){t.accountFoucs=!0},blur:function(e){t.accountFoucs=!1}}})],1),e("a-form-item",[e("i",{class:["icon",t.passwdFoucs?"icon_password_check":"icon_password"]}),e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[t.formRules.passwd]}],expression:"['password', { rules: [formRules.passwd] }]"}],staticClass:"password",attrs:{placeholder:t.$t("password")},on:{focus:function(e){t.passwdFoucs=!0},blur:function(e){t.passwdFoucs=!1}}})],1),t.showCode?e("a-form-item",{staticClass:"verification-code"},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",t.inputCode],expression:"['code', inputCode]"}],attrs:{autocomplete:"off",placeholder:t.$t("enter_verify_code")},on:{change:t.inputCodeChange}}),e("img",{attrs:{src:t.imgsrc,alt:"验证码获取失败"},on:{click:function(e){return t.getMsgCode(1)}}})],1):t._e()],1)],1),e("a-tab-pane",{key:"2",attrs:{tab:t.$t("login_with_mobile")}},[e("a-form",{attrs:{form:t.phoneForms,layout:"horizontal"}},[e("a-form-item",[e("i",{class:["icon",t.mobileFoucs?"icon_mobile_check":"icon_mobile"]}),e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[t.formRules.mobile]}],expression:"['mobile', { rules: [formRules.mobile] }]"}],staticClass:"mobile",attrs:{placeholder:t.$t("phone")},on:{focus:function(e){t.mobileFoucs=!0},blur:function(e){t.mobileFoucs=!1}}})],1),e("a-form-item",{staticClass:"verification-code"},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["msgCode",{rules:[t.formRules.verify]}],expression:"['msgCode', { rules: [formRules.verify] }]"}],attrs:{autocomplete:"off",placeholder:t.$t("enter_verify_code")},on:{change:t.inputCodeChange}}),e("a-button",{class:["send-verify",t.showCountDown?"count-down":""],attrs:{disabled:t.showCountDown},on:{click:t.getPhoneCode}},[t._v(" "+t._s(t.showCountDown?`${t.seconds}${t.$t("seconds_after_resend")}`:t.$t("get_verify_code"))+" ")])],1),t.showphoneCode?e("a-form-item",{staticClass:"verification-code"},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["imgCode",t.inputCode],expression:"['imgCode', inputCode]"}],attrs:{autocomplete:"off",placeholder:t.$t("enter_verify_code")},on:{change:t.inputCodeChange}}),e("img",{attrs:{src:t.phoneimgsrc,alt:"验证码获取失败"},on:{click:function(e){return t.getMsgCode(2)}}})],1):t._e()],1)],1)],1),e("a-button",{staticClass:"login-btn enable-btn",attrs:{type:"primary",loading:t.loginLoad},on:{click:t.login}},[e("span",[t._v(t._s(t.$t("login")))])])],1)])])]),e("a-modal",{attrs:{width:"800px",destroyOnClose:!0,maskClosable:!1,title:"账号合并"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("a-spin",{attrs:{spinning:t.spinning,tip:"加载中..."}},[e("a-table",{staticStyle:{"margin-top":"20px"},attrs:{rowClassName:(t,e)=>e%2===1?"tableColorEven":"tableColorOdd",rowKey:t=>t.id,columns:t.columns,dataSource:t.dataSource,size:"middle",pagination:!1,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange,type:"radio"}},scopedSlots:t._u([{key:"name",fn:function(s,o){return[o.editable?e("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:s},on:{change:e=>t.handleChange(e.target.value,o)}}):[t._v(" "+t._s(s)+" ")]]}},{key:"action",fn:function(s,o){return[e("div",{staticClass:"editable-row-operations"},[o.editable?e("span",[e("a",{staticClass:"mr10",on:{click:()=>t.cancel(o.id)}},[t._v("取消")]),e("a-popconfirm",{attrs:{title:"确定保存吗?"},on:{confirm:()=>t.save(o)}},[e("a",[t._v("保存")])])],1):e("span",[e("a",{attrs:{disabled:""!==t.editingKey},on:{click:()=>t.edit(o.id)}},[t._v("编辑")])])])]}}])})],1),e("template",{slot:"footer"},[e("div",{staticClass:"model_foot"},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{attrs:{flex:"600PX"}},[e("div",{staticClass:"model_state"},[e("span",[t._v("合并声明:")]),e("ul",[e("li",[t._v("1、为了给您提供更好的服务，方便您管理账号，我们对您的多个账号进行合并，请从中选择一个账号作为您的唯一账号")]),e("li",[t._v("2、今后此账号可以在不同平台进行登录")])])])]),e("a-col",{attrs:{flex:"150px"}},[e("a-button",{key:"back",on:{click:function(e){t.visible=!1}}},[t._v("关闭")]),e("a-popconfirm",{attrs:{placement:"topRight",title:"确定和此账号进行合并吗?",okText:"是",cancelText:"否"},on:{confirm:t.handleOk}},[e("a-button",{attrs:{type:"primary"}},[t._v(" 确定 ")])],1)],1)],1)],1)])],2),e("a-modal",{attrs:{title:"修改密码",visible:t.settingVisible,footer:null,width:"700px"},on:{cancel:t.settingshow}},[e("a-form",{attrs:{form:t.form,"label-col":{span:5},"wrapper-col":{span:16}}},[e("a-form-item",{attrs:{label:"原密码"}},[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["oldPassword",{rules:[t.formRules.required]}],expression:"['oldPassword', { rules: [formRules.required] }]"}],attrs:{placeholder:"请输入原密码"}})],1),e("a-form-item",{attrs:{label:"新密码"}},[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["newPassword",{rules:[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d).{8,16}$/,message:"密码为8-16位字符，至少包含英文字母和数字"}]}],expression:"[\n\t\t\t\t\t\t\t'newPassword',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trules: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\tpattern: /^(?=.*[a-zA-Z])(?=.*\\d).{8,16}$/,\n\t\t\t\t\t\t\t\t\t\tmessage: '密码为8-16位字符，至少包含英文字母和数字'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]"}],attrs:{placeholder:"请输入新密码"}})],1),e("a-form-item",{attrs:{label:"确认密码"}},[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["reEnterPassword",{rules:[{required:!0,message:"必填项不能为空!"},{validator:this.confirmPassword}]}],expression:"[\n\t\t\t\t\t\t\t'reEnterPassword',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trules: [\n\t\t\t\t\t\t\t\t\t{ required: true, message: '必填项不能为空!' },\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalidator: this.confirmPassword\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]"}],attrs:{placeholder:"请确认密码"}})],1),e("a-form-item",{attrs:{"wrapper-col":{span:4,offset:20}}},[e("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" 确定 ")])],1)],1)],1)],1)},i=[],a=(s("d9e2"),s("14d9"),s("7d92")),n=s("675d"),r=s("ec50"),c=s("ff16"),l=s("4328"),d=s.n(l),u=s("8060"),h=s("ec26");let m=[{title:"账号",align:"center",dataIndex:"username",scopedSlots:{customRender:"name"}},{title:"公司",align:"center",dataIndex:"companyName"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}];var g={name:"merchantLogin",components:{VerifyCode:n["a"]},watch:{showQrCode(t,e){t?(Object(c["a"])(this.QRsocket,this),this.QRtime=setInterval(()=>{this.QRsocket=null},3e5)):(clearInterval(this.QRtime),this.QRsocket&&(this.QRsocket=null))}},data(){return{language:"cn",accountForm:this.$form.createForm(this),phoneForm:this.$form.createForm(this),phoneForms:this.$form.createForm(this),form:this.$form.createForm(this),company:"",verifiedCode:"",inputCodeContent:"",showQrCode:!1,showCode:!1,showphoneCode:!1,showSafety:!1,imgsrc:"",myclass:!1,loginMode:{pc:{img:s("57cb")},qr:{img:s("c43e")}},formRules:r["a"],currentKey:"1",inputCode:{rules:[{required:!0,message:this.$t("verify_code_error")}]},accountFoucs:!1,passwdFoucs:!1,mobileFoucs:!1,loginLoad:!1,seconds:59,showCountDown:!1,QRCodeImg:"",QRsocket:null,QRtime:null,dateTimer:null,QRCodeImgShow:!1,uuid:"",visible:!1,settingVisible:!1,columns:m,dataSource:[],cacheData:[],selectedRowKeys:[],spinning:!1,editingKey:"",publicKey:"",QRshow:!0,phoneCodeMsg:"",phoneimgsrc:"",uuids:""}},created(){let t=navigator.language;t.indexOf("zh")>-1?this.language="cn":this.language="en",this.$i18n.locale=this.language,this.getCompany(),document.onkeydown=()=>{var t=window.event.keyCode;13==t&&this.login()},this.showCode=JSON.parse(sessionStorage.getItem("showCode")),this.showCode&&this.getMsgCode(1)},methods:{getPublicKey(){return new Promise((t,e)=>{this.$axios.get("/interface/sm2/getPublicKey").then(s=>{200===s.code?(this.publicKey=s.result.publicKey,t()):e(new Error("获取公钥失败"))}).catch(t=>{e(t)})})},save(t){const e=[...this.dataSource],s=[...this.cacheData],o=e.find(e=>t.id===e.id),i=s.find(e=>t.id===e.id);o&&i&&(delete o.editable,this.dataSource=e,Object.assign(i,o),this.cacheData=s,this.$axios.get("/interface/user/modifyUsernameWhenMergeUser",{params:{userId:t.id,username:t.username}}).then(t=>{t&&200==t.code?this.$message.success("修改成功"):(this.$message.error("账号已存在,请重新修改"),this.edit(this.selectedRowKeys[0]))})),this.editingKey=""},cancel(t){const e=[...this.dataSource],s=e.find(e=>t===e.id);this.editingKey="",s&&(Object.assign(s,this.cacheData.find(e=>t===e.id)),delete s.editable,this.dataSource=e)},edit(t){const e=[...this.dataSource],s=e.find(e=>t===e.id);this.editingKey=t,s&&(s.editable=!0,this.dataSource=e)},handleChange(t,e){const s=[...this.dataSource],o=s.find(t=>e.id===t.id);o&&(o.username=t,this.dataSource=s)},handleOk(){this.selectedRowKeys.length>0?this.$axios.get("/interface/user/mergeUser",{params:{userId:this.selectedRowKeys[0]}}).then(t=>{t&&200==t.code?(this.visible=!1,this.goHome()):(this.$message.error(t.message),this.edit(this.selectedRowKeys[0]))}):this.$notify.error({message:"请选择需要合并的账号"})},getAccount(){this.$axios.get("/interface/user/checkSameUserInDifferentCompany").then(t=>{this.dataSource=t.result,this.cacheData=this.dataSource.map(t=>({...t}))})},onSelectChange(t,e,s){this.selectedRowKeys=t},changeLang(){this.language="cn"==this.language?"en":"cn",this.$i18n.locale=this.language,sessionStorage.setItem("lang","cn"===this.language?"en":"cn"),this.$actions.setGlobalState({lang:"cn"===this.language?"en":"cn"}),this.$store.commit("setState",{lang:"cn"===this.language?"en":"cn"})},getMsgCode(t){1==t?this.accountForm.setFieldsValue({code:""}):this.phoneForms.setFieldsValue({imgCode:""});let e=Object(h["a"])();this.uuids=e,this.$axios.get("/interface/captcha/getCode",{responseType:"blob",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json;charset=utf-8"},params:{uuid:e}}).then(e=>{const s=new FileReader;s.onload=()=>{1==t?this.imgsrc=s.result:this.phoneimgsrc=s.result},s.readAsDataURL(e),1==t&&this.$axios.get("/interface/captcha/getUuid").then(t=>{this.uuid=t.uuid})})},settingshow(){this.form.resetFields(),this.settingVisible=!1},confirmPassword(t,e,s){const o=this.form.getFieldValue("newPassword"),i=this.form.getFieldValue("reEnterPassword");o!=i?"reEnterPassword"==t.field&&s("两次输入的密码不一致！"):("reEnterPassword"==t.field||this.form.setFields({reEnterPassword:{value:i,errors:null}}),s())},getPasswordStrength(t){const e=/^(?=.*[a-zA-Z])(?=.*\d).{8,16}$/,s=e.test(t);return s?1:0},handleSubmit(){this.form.validateFields((t,e)=>{t||this.getPublicKey().then(()=>{this.$axios.post("/interface/user/modifyPassword",{newPassword:u["sm2"].doEncrypt(Object(a["a"])(e.newPassword),this.publicKey,1),oldPassword:u["sm2"].doEncrypt(Object(a["a"])(e.oldPassword),this.publicKey,1),publicKey:this.publicKey}).then(t=>{200==t.code?(this.$notify.success({message:"修改成功,请您重新登录",duration:4.5}),this.settingVisible=!1):this.$notify.warning({message:t.messageCn,duration:4.5})})})})},login(){let t=t=>{var e,s,o,i;this.$store.commit("setState",{checkStatus:null!==(e=t.result.checkStatus)&&void 0!==e?e:null,token:null!==(s=t.result.token)&&void 0!==s?s:"",btnPermission:null!==(o=t.result.btnPermission)&&void 0!==o?o:[],userInfo:null!==(i=t.result.realName)&&void 0!==i?i:""}),this.$notify.success({message:`${t.result.realName}, ${this.$t("welcome_back")}`}),0==t.result.pwdStrength?(this.$notify.warning({message:"您的密码强度太低，请修改密码！"}),this.settingVisible=!0):t.result.isMerge?this.goHome():(this.visible=!0,this.getAccount()),document.onkeydown=null};"1"===this.currentKey?this.accountForm.validateFields((e,s)=>{e||this.getPublicKey().then(()=>{let e={username:s.account,password:u["sm2"].doEncrypt(Object(a["a"])(s.password),this.publicKey,1),publicKey:this.publicKey,code:this.showCode?s.code:"",uuid:this.uuid,pwdStrength:this.getPasswordStrength(s.password)};this.loginLoad=!0,this.$axios.post("/intertion/user/eintragen",this.$qs.stringify(e),{headers:{verifyCode:this.verifyCode}}).then(e=>{this.loginLoad=!1,e&&200===(null===e||void 0===e?void 0:e.code)?t(e):e&&10==(null===e||void 0===e?void 0:e.result.code)?this.$notify.error({message:this.$t("password_error")}):(this.getMsgCode(1),e.result.wrongTimes>=1&&e.result.wrongTimes<5?(sessionStorage.setItem("showCode",!0),this.showCode=!0):e.result.wrongTimes>5&&e.result.wrongTimes<11&&(this.currentKey="2"),this.$notify.error({message:e.result.messageCn}))}).catch(t=>{this.loginLoad=!1,403==t.response.status?this.$notify.error({message:this.$t("IP_blocking")}):this.$notify.error({message:this.$t("login_failed")})})})}):"2"===this.currentKey&&this.phoneForms.validateFields((e,s)=>{if(!e){let e={uuid:this.uuids},o=Object.assign(s,e);this.$axios({method:"post",url:"/intertion/user/loginByPhone",data:d.a.stringify(o),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{var s,o;e&&"0"===(null===e||void 0===e||null===(s=e.result)||void 0===s?void 0:s.code)?t(e):(this.$notify.error({message:null===e||void 0===e||null===(o=e.result)||void 0===o?void 0:o.message}),e.result.num>0&&(this.getMsgCode(2),this.showphoneCode=!0))}).catch(t=>{403==t.response.status?this.$notify.error({message:this.$t("IP_blocking")}):(this.loginLoad=!1,this.$notify.error({message:this.$t("login_failed")}))})}})},QRlogin(t){var e,s,o;this.$store.commit("setState",{token:null!==(e=t.token)&&void 0!==e?e:"",btnPermission:null!==(s=t.btnPermission)&&void 0!==s?s:[],userInfo:null!==(o=t.realName)&&void 0!==o?o:""}),this.$notify.success({message:`${t.realName}, ${this.$t("welcome_back")}`}),this.goHome(),document.onkeydown=null},getPhoneCode(){this.phoneForms.validateFields(["mobile"],(t,e)=>{t||this.$axios({method:"get",url:"/intertion/user/sendMsgCode",params:e}).then(t=>{if(t&&200===t.code){this.showCountDown=!0;let t=setInterval(()=>{this.seconds--,this.seconds<=0&&(this.showCountDown=!1,this.seconds=59,clearInterval(t))},1e3);this.$notify.success({message:this.$t("verify_code_sent")})}}).catch(t=>{this.$notify.error({message:this.$t("verify_code_sent_failed")})})})},getQRCode(t){this.$axios({method:"get",url:"wxSeachartService/wx/getQRCode",params:{sceneId:t,expireSeconds:3e5}}).then(t=>{this.QRshow=!1,200==t.code?(this.QRCodeImg=t.result,this.QRCodeImgShow=!0):this.QRCodeImgShow=!1})},getCompany(){this.$axios({method:"get",url:"/interface/org/getIndexName"}).then(t=>{var e;t.success&&(document.title=t.message,this.company=t.message,this.$store.commit("setState",{company:null!==(e=t.message)&&void 0!==e?e:""}))})},scanQrcode(){this.showQrCode=!this.showQrCode,this.QRCodeImgShow=!1},goRegister(){this.$router.push("/register")},inputCodeChange(t){this.inputCodeContent=t.target.value,t.target.value&&0!=t.target.value?(this.inputCodeContent=this.inputCodeContent.toLowerCase(),this.inputCodeNull=!1):this.inputCodeNull=!0},generateCode(t){this.verifiedCode=t.toLowerCase()},changeMode(t){this.currentKey=t},validateInputCode(t,e,s){e&&this.verifiedCode!=this.inputCodeContent?s(this.$t("verify_code_error")):s()}}},p=g,f=(s("00f4"),s("2877")),w=Object(f["a"])(p,o,i,!1,null,"5e06f9f8",null);e["default"]=w.exports},ec26:function(t,e,s){"use strict";const o="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:o};let a;const n=new Uint8Array(16);function r(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(n)}const c=[];for(let u=0;u<256;++u)c.push((u+256).toString(16).slice(1));function l(t,e=0){return c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]}function d(t,e,s){if(i.randomUUID&&!e&&!t)return i.randomUUID();t=t||{};const o=t.random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){s=s||0;for(let t=0;t<16;++t)e[s+t]=o[t];return e}return l(o)}e["a"]=d},ff16:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));let o="wss://springcloud.intertion.cn/wxSeachartService/WxLoginWebSocketServer/",i=null,a=null,n="";if("WebSocket"in window)try{i=(t,e)=>{clearInterval(n),a=e,a.dateTimer=(new Date).getTime(),t=new WebSocket(o+a.dateTimer),t.onopen=()=>{a.getQRCode(a.dateTimer)},t.onmessage=t=>{let e=JSON.parse(t.data);0==e.code?setTimeout(()=>{a.QRlogin(e)},2e3):a.getQRCode(a.dateTimer)},t.onclose=e=>{"merchantLogin"===a.$route.name||"login"===a.$route.name?r(t,a):t=null}}}catch(c){i=(t,e)=>{clearInterval(n),new WebSocket(null)}}const r=(t,e)=>{t.close(),3===t.readyState&&(t=null,n=setTimeout(()=>{i(t,e)},5e3))}}}]);